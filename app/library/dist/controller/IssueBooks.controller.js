sap.ui.define(["./BaseController","sap/ui/model/odata/v2/ODataModel","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,o,t,s){"use strict";return e.extend("com.app.library.controller.IssueBooks",{onInit:function(){},onIssueBookPress:async function(e){console.log(this.byId("idIssueBooks").getSelectedItem().getBindingContext().getObject());if(this.byId("idIssueBooks").getSelectedItems().length>1){s.show("Please Select only one Book");return}var o=this.byId("idIssueBooks").getSelectedItem().getBindingContext().getObject();console.log(o);var t=new Date;if(t.getMonth()==11){var n=new Date(t.getFullYear()+1,0,1)}else{var n=new Date(t.getFullYear(),t.getMonth()+1);console.log(n)}const a=new sap.ui.model.json.JSONModel({book_ID:o.book.ID,user_ID_ID:o.user_ID.ID,issue_Date:t,due_Date:n,notify:`Your reserved book  title "\n            ${o.book.Title}\n            " is issued`});this.getView().setModel(a,"userModel");const i=this.getView().getModel("userModel").getProperty("/"),l=this.getView().getModel("modelv2");try{await this.createData(l,i,"/BookLoan");sap.m.MessageBox.success("Book is Succesfully Issued");var r=this.byId("idIssueBooks");var d=r.getSelectedItem();r.removeItem(d)}catch(e){sap.m.MessageBox.error("Some technical Issue")}}})});